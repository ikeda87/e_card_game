# eカードゲーム

## 概要
2020/6/19製作開始<br>
ruby単体でのゲーム制作記録になります。<br>
福本伸行作「賭博黙示録カイジ」のEカード編に登場する、カイジvs利根川の[Eカード](https://ja.wikipedia.org/wiki/%E8%B3%AD%E5%8D%9A%E9%BB%99%E7%A4%BA%E9%8C%B2%E3%82%AB%E3%82%A4%E3%82%B8#E%E3%82%AB%E3%83%BC%E3%83%89)を表現してみました。<br>
原作リスペクトではありますが二次創作物になります。<br>
原作での登場人物名や貨幣単位名称は使用しておりません。<br>
原作でのカードの名称、カード間の強弱関係は使用しております。<br>
心象描写は多分に使用しております。<br>
ゲーム進行やゲーム設計は簡素化しております。<br>
視力や聴力は失いません。<br>
心拍数/体温/発汗などは測定できません。<br>
針や焼き土下座は登場しません。<br>
github上でソースコードは一般公開しておりますが、著作権上の問題が生じる場合には公開範囲を限定しますので、[製作者](https://twitter.com/Growingplant3)まで連絡頂けますようお願い致します。<br>
2020/7/21完成<br>

## ゲーム進行
0. ゲーム開始
1. ゲームの流れについて説明する
2. 現在のターンを表示する
3. カードを選択する(市民もしくは奴隷のカードを選ぶ)
<br>3-1. 引き分け(市民vs市民) → 3に戻る
<br>3-2. 負け(市民vs皇帝) → 4に進む
<br>3-3. 勝つ(奴隷vs皇帝) → 5に進む
4. バッドエンド → 6に進む
5. トゥルーエンド → 6に進む
6. リトライについて確認する
<br>6-1. yes  →  1に戻る
<br>6-2. no → ゲーム終了

## ゲーム設計
- Participantクラス
  - player/enemyインスタンスを生成
  - name/deckプロパティを持つ
  - nameプロパティは初期化の際に自動入力する
  - enemyインスタンスはdeckプロパティに、@enemy_deckを保持する
- Deckクラス
  - enemy_deckインスタンスを生成
  - cardsプロパティを持つ
  - enemy_deckインスタンスはcardsプロパティに、@enemy_cardsを保持する
  - mixメソッドにより、@enemy_cardsをランダム化する
  - @enemy_cards変数(配列)に、emperor/citizenインスタンスを格納する
- Cardクラス
  - emperor/citizenインスタンスを生成
  - nameプロパティを持つ
  - nameプロパティは初期化の際に自動入力する
- Matchクラス
  - matchインスタンスを生成
  - turnプロパティを持つ
  - turnプロパティは初期化の際に自動入力する
- Gameクラス
  - ゲームの進行を司る
  - 定数・変数を初期化する
  - $ ruby game.rbでゲームスタート
- Progressクラス
  - ゲーム全体の説明文章を格納する
  - explain_situationメソッドにより、ゲーム開始までの流れを説明する文章を返す
  - explain_ruleメソッドにより、ゲームの流れを説明する文章を返す
  - get_readyメソッドにより、ゲーム説明をもう一度出力するかの文章を返す  
    - turn_passメソッドにより、@matchのturnプロパティに1ずつ加える
    - current_turnメソッドにより、@matchのturnプロパティを返し相手デッキの状況を返す（例：第3ターン、残りカードは"皇帝"が1枚で"市民"が2枚です）
    - gets.chompを使って、プレイヤーのカード選択意思を取得する
    - use_cardメソッドにより、@enemy_cardsから、先頭のカード(要素)を1枚減らす
    - 出されたカードの結果を判定し、引き分け/負け/勝ちを返す
  - 勝敗が決したら、turn_pass→current_turn→use_card→turn_pass→・・・のループを抜ける
  - game_clearメソッドにより、ゲームクリアの文章を返す
  - game_overメソッドにより、ゲームオーバーの文章を返す
  - continue?メソッドにより、ゲーム再開についての文章を返す
  - gets.chompを使って、ゲームを続けるかプレイヤーの意思を取得する
  - ゲーム全体のループを続ける、もしくは抜ける

## テスト
minitestで記述しました。
- testディレクトリにて次のコードでテストを実行できます。
  - $ ruby card_test.rb
  - $ ruby deck_test.rb
  - $ ruby match_test.rb
  - $ ruby participant.rb

## 学び
classやattr_readerを使ってみました。<br>
インスタンス変数やインスタンスメソッドの使い方を理解しました。<br>
||= を使って定数再定義の警告文を回避しました。<br>
テストコードを書きました。<br>
デバッグを整備しました。

## 実行環境
- macOS
- ruby 2.6.4
- iTerm2(フォント:Monaco,サイズ:20)
<br>で動作を確認しております。

## 備考
ざわざわの表示が乱れる場合、iTerm2の設定変更を試してみてください。<br>
iTerm2 > Preferences > Profile > Fontでフォントやサイズ設定を変更できます。<br>
私の好きな「賭博黙示録カイジ」の登場人物は黒服です、キャラが立ってるから(○´ω｀○)ゞ<br>
カード選択時には１・２以外にも分岐が用意されております。カイジといえば・・・？
